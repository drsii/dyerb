import{l as C,r as g,d as _,a as r,o as n,m as H,n as L,b as t,t as i,g as m,e as h,_ as p,p as S,q as l,k as y,s as k,x as $,F as w,y as A,z as I,A as N}from"./index-cdzsqRmw.js";import{b as D,A as x,u as B,L as V}from"./LoadingSpinner-BCFih7nR.js";const F=C("profile",()=>{const s=g([]),d=g(!1),e=g(null),a=g(null);async function c(){d.value=!0,e.value=null;try{return s.value=await D.getHeroes(),a.value=new Date,!0}catch(o){return o instanceof x?e.value=o.message:e.value="Failed to fetch heroes",!1}finally{d.value=!1}}function u(){s.value=[],a.value=null,e.value=null}function f(o){return s.value.find(v=>v.heroId===o)}return{heroes:s,isLoading:d,error:e,lastFetched:a,fetchHeroes:c,clearHeroes:u,getHeroById:f}}),R={class:"hero-portrait"},z={class:"class-icon"},E={class:"hero-info"},M={class:"hero-name"},K={class:"hero-class"},P={class:"hero-level"},T={key:0,class:"paragon"},W={class:"hero-badges"},q={key:0,class:"badge seasonal",title:"Seasonal"},U={key:1,class:"badge hardcore",title:"Hardcore"},j={key:2,class:"badge dead",title:"Dead"},G={class:"hero-meta"},J={class:"last-played"};function O(s){return{Barbarian:"âš”ï¸",Crusader:"ðŸ›¡ï¸","Demon Hunter":"ðŸ¹",Monk:"â˜¯ï¸",Necromancer:"ðŸ’€","Witch Doctor":"ðŸŽ­",Wizard:"âœ¨"}[s]||"ðŸ‘¤"}const Q=_({__name:"HeroCard",props:{hero:{}},emits:["select"],setup(s){function d(e){return e?new Date(e*1e3).toLocaleDateString():"Never"}return(e,a)=>(n(),r("div",{class:L(["hero-card",{dead:s.hero.dead}]),onClick:a[0]||(a[0]=c=>e.$emit("select",s.hero.heroId)),role:"button",tabindex:"0",onKeydown:a[1]||(a[1]=H(c=>e.$emit("select",s.hero.heroId),["enter"]))},[t("div",R,[t("span",z,i(O(s.hero.heroClass)),1)]),t("div",E,[t("h3",M,i(s.hero.name),1),t("div",K,i(s.hero.heroClass),1),t("div",P,[m(" Level "+i(s.hero.level)+" ",1),s.hero.paragonLevel>0?(n(),r("span",T," ("+i(s.hero.paragonLevel)+") ",1)):h("",!0)])]),t("div",W,[s.hero.seasonal?(n(),r("span",q,"S")):h("",!0),s.hero.hardcore?(n(),r("span",U,"HC")):h("",!0),s.hero.dead?(n(),r("span",j,"ðŸ’€")):h("",!0)]),t("div",G,[t("span",J,"Last played: "+i(d(s.hero.lastUpdated)),1)])],34))}}),X=p(Q,[["__scopeId","data-v-52ec3b11"]]),Y={class:"hero-select-view"},Z={class:"view-header"},ee=["disabled"],te={key:0,class:"error-card"},se={key:1,class:"loading-state"},oe={key:2,class:"error-card"},ae={class:"error-actions"},ne={key:3,class:"empty-state"},re={key:4,class:"hero-grid"},le=_({__name:"HeroSelectView",setup(s){const d=I(),e=F(),a=B();S(async()=>{a.isAuthenticated||await a.authenticate(),a.isAuthenticated&&e.heroes.length===0&&await e.fetchHeroes()});function c(f){d.push(`/dashboard/${f}`)}async function u(){await e.fetchHeroes()}return(f,o)=>{const v=$("router-link");return n(),r("div",Y,[t("div",Z,[o[0]||(o[0]=t("div",null,[t("h1",null,"Select a Hero"),t("p",{class:"description"},"Choose a hero to analyze their gear")],-1)),l(e).heroes.length>0?(n(),r("button",{key:0,class:"btn btn-secondary",disabled:l(e).isLoading,onClick:u},i(l(e).isLoading?"Refreshing...":"Refresh"),9,ee)):h("",!0)]),l(a).error?(n(),r("div",te,[o[2]||(o[2]=t("h3",null,"Authentication Error",-1)),t("p",null,i(l(a).error),1),y(v,{to:"/settings",class:"btn btn-primary"},{default:k(()=>[...o[1]||(o[1]=[m(" Check Settings ",-1)])]),_:1})])):l(a).isLoading||l(e).isLoading?(n(),r("div",se,[y(V,{message:l(a).isLoading?"Authenticating...":"Loading heroes..."},null,8,["message"])])):l(e).error?(n(),r("div",oe,[o[4]||(o[4]=t("h3",null,"Error Loading Heroes",-1)),t("p",null,i(l(e).error),1),t("div",ae,[t("button",{class:"btn btn-primary",onClick:u}," Try Again "),y(v,{to:"/settings",class:"btn btn-secondary"},{default:k(()=>[...o[3]||(o[3]=[m(" Check Settings ",-1)])]),_:1})])])):l(e).heroes.length===0?(n(),r("div",ne,[o[5]||(o[5]=t("div",{class:"empty-icon"},"ðŸŽ®",-1)),o[6]||(o[6]=t("h3",null,"No Heroes Found",-1)),o[7]||(o[7]=t("p",null," No heroes were found on this account. Make sure your profile is public and you have created at least one character. ",-1)),t("button",{class:"btn btn-primary",onClick:u}," Refresh ")])):(n(),r("div",re,[(n(!0),r(w,null,A(l(e).heroes,b=>(n(),N(X,{key:b.heroId,hero:b,onSelect:c},null,8,["hero"]))),128))]))])}}}),ce=p(le,[["__scopeId","data-v-269537a8"]]);export{ce as default};

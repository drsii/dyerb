import{u as x,l as T,r as P,c as $,d as H,a as r,e as g,b as e,F as R,y as C,t as i,o as a,_ as N,n as I,A as E,k as L,q as h,g as q,z as O}from"./index-boeohUY1.js";import{u as W}from"./hero-CRn8EGim.js";import{L as U}from"./LoadingSpinner-CUwXWg4D.js";class K{API_URL="https://api.anthropic.com/v1/messages";async analyzeHero(l){const n=x();if(!n.claudeApiKey)throw new Error("Claude API key not configured. Add it in Settings.");const o=this.buildPrompt(l),s=await fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":n.claudeApiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:4096,messages:[{role:"user",content:o}]})});if(!s.ok){const c=await s.json().catch(()=>({}));throw s.status===401?new Error("Invalid Claude API key. Please check your settings."):s.status===429?new Error("Rate limited. Please try again in a moment."):new Error(c.error?.message||`Claude API error: ${s.status}`)}const m=(await s.json()).content?.[0]?.text;if(!m)throw new Error("No response from Claude");return this.parseResponse(m)}buildPrompt(l){const n=l.activeSkills.map(y=>`${y.name}${y.rune?` (${y.rune})`:""}`).join(", ")||"None equipped",o=l.passiveSkills.map(y=>y.name).join(", ")||"None equipped",s=new Map;for(const y of Object.values(l.items))y.setName&&s.set(y.setName,(s.get(y.setName)||0)+1);const u=s.size>0?Array.from(s.entries()).map(([y,b])=>`${y} (${b} pieces)`).join(", "):"No set items equipped",m=l.cubePowers?`Weapon: ${l.cubePowers.weapon||"Empty"}, Armor: ${l.cubePowers.armor||"Empty"}, Jewelry: ${l.cubePowers.jewelry||"Empty"}`:"Not using Kanai's Cube",c=l.legendaryGems.length>0?l.legendaryGems.map(y=>`${y.name} (Rank ${y.rank||0})`).join(", "):"No legendary gems equipped";return`You are a Diablo III expert build advisor. Analyze this hero and provide optimal build recommendations.

## Hero Information
- **Class**: ${l.heroClass}
- **Level**: ${l.level}
- **Paragon Level**: ${l.paragonLevel||0}
- **Seasonal**: ${l.seasonal?"Yes":"No"}
- **Hardcore**: ${l.hardcore?"Yes":"No"}

## Current Build
- **Active Skills**: ${n}
- **Passive Skills**: ${o}
- **Equipped Sets**: ${u}
- **Kanai's Cube**: ${m}
- **Legendary Gems**: ${c}

## Stats
- **Damage**: ${l.damage?.toLocaleString()||"Unknown"}
- **Toughness**: ${l.toughness?.toLocaleString()||"Unknown"}
- **Recovery**: ${l.recovery?.toLocaleString()||"Unknown"}
- **Life**: ${l.life?.toLocaleString()||"Unknown"}

Based on this ${l.heroClass}'s current setup and paragon level, provide build recommendations optimized for efficient Greater Rift pushing and farming.

Respond with a JSON object in this exact format (no markdown, just raw JSON):
{
  "skills": {
    "active": [
      {"skill": "Skill Name", "rune": "Rune Name", "reason": "Why this skill"}
    ],
    "passive": [
      {"skill": "Passive Name", "reason": "Why this passive"}
    ]
  },
  "gear": {
    "sets": [
      {"name": "Set Name", "pieces": 6, "reason": "Why this set"}
    ],
    "items": [
      {"slot": "mainHand", "item": "Item Name", "reason": "Why this item"}
    ],
    "cubePowers": {
      "weapon": {"name": "Weapon Power Name", "reason": "Why this power and what stat/effect it provides"},
      "armor": {"name": "Armor Power Name", "reason": "Why this power and what stat/effect it provides"},
      "jewelry": {"name": "Jewelry Power Name", "reason": "Why this power and what stat/effect it provides"}
    }
  },
  "gems": [
    {"name": "Gem Name", "priority": 1, "reason": "Why this gem"}
  ],
  "playstyle": "Brief description of how to play this build",
  "farmingPriority": ["First item to farm", "Second item to farm"],
  "summary": "One paragraph summary of the recommended build and why",
  "projectedImprovements": {
    "damage": {"estimatedMultiplier": "2-3x", "rating": "major", "note": "Optional context"},
    "toughness": {"estimatedMultiplier": "1.5x", "rating": "moderate"},
    "recovery": {"estimatedMultiplier": "2x", "rating": "moderate"},
    "life": {"estimatedMultiplier": "1.2x", "rating": "minor"},
    "grTierPotential": {"current": "GR 70-80", "projected": "GR 100-110", "note": "With full set and optimized gems"}
  }
}`}normalizeProjections(l){if(!l||typeof l!="object")return;const n=l,o=u=>{const m={current:null,estimatedMultiplier:"N/A",rating:"minor"};if(!u||typeof u!="object")return m;const c=u;return{current:typeof c.current=="number"?c.current:null,estimatedMultiplier:String(c.estimatedMultiplier||"N/A"),rating:this.validateRating(c.rating),note:c.note?String(c.note):void 0}},s=u=>{const m={current:"Unknown",projected:"Unknown"};if(!u||typeof u!="object")return m;const c=u;return{current:String(c.current||"Unknown"),projected:String(c.projected||"Unknown"),note:c.note?String(c.note):void 0}};return{damage:o(n.damage),toughness:o(n.toughness),recovery:o(n.recovery),life:o(n.life),grTierPotential:s(n.grTierPotential)}}validateRating(l){return typeof l=="string"&&["minor","moderate","major","transformative"].includes(l)?l:"minor"}normalizeCubePowers(l){const n={name:"",reason:""};if(!l)return{weapon:n,armor:n,jewelry:n};const o=u=>{if(typeof u=="string")return{name:u,reason:""};if(typeof u=="object"&&u!==null){const m=u;return{name:String(m.name||""),reason:String(m.reason||"")}}return n},s=l;return{weapon:o(s.weapon),armor:o(s.armor),jewelry:o(s.jewelry)}}parseResponse(l){let n=l.trim();const o=l.match(/```(?:json)?\s*([\s\S]*?)```/);o&&(n=o[1].trim());try{const s=JSON.parse(n);return{skills:{active:s.skills?.active||[],passive:s.skills?.passive||[]},gear:{sets:s.gear?.sets||[],items:s.gear?.items||[],cubePowers:this.normalizeCubePowers(s.gear?.cubePowers)},gems:s.gems||[],playstyle:s.playstyle||"",farmingPriority:s.farmingPriority||[],summary:s.summary||"",projectedImprovements:this.normalizeProjections(s.projectedImprovements)}}catch(s){throw console.error("Failed to parse Claude response:",s),console.log("Raw response:",l),new Error("Failed to parse build recommendations. Please try again.")}}}const J=new K,V=T("claudeAnalysis",()=>{const t=P(null),l=P(!1),n=P(null),o=P(null),s=P(new Map),u=$(()=>t.value!==null),m=$(()=>(t.value?.skills.active.length??0)>0),c=$(()=>(t.value?.skills.passive.length??0)>0),y=$(()=>(t.value?.gear.sets.length??0)>0||(t.value?.gear.items.length??0)>0),b=$(()=>(t.value?.gems.length??0)>0);async function S(f,A=!1){if(!A&&s.value.has(f.heroId)){t.value=s.value.get(f.heroId),o.value=f.heroId,n.value=null;return}l.value=!0,n.value=null;try{const w=await J.analyzeHero(f);t.value=w,o.value=f.heroId,s.value.set(f.heroId,w)}catch(w){n.value=w instanceof Error?w.message:"Analysis failed",t.value=null}finally{l.value=!1}}function d(){t.value=null,o.value=null,n.value=null}function p(){s.value.clear(),d()}function k(f){s.value.delete(f),o.value===f&&d()}return{recommendation:t,isAnalyzing:l,error:n,analyzedHeroId:o,hasRecommendation:u,hasActiveSkills:m,hasPassiveSkills:c,hasGearRecommendations:y,hasGemRecommendations:b,generateBuildSuggestion:S,clearRecommendation:d,clearCache:p,invalidateHeroCache:k}}),z="d3-saved-reports",Y=T("savedReports",()=>{const t=P([]);function l(){try{const d=localStorage.getItem(z);d&&(t.value=JSON.parse(d))}catch(d){console.error("Failed to load saved reports:",d),t.value=[]}}function n(){try{localStorage.setItem(z,JSON.stringify(t.value))}catch(d){console.error("Failed to save reports:",d)}}l();const o=$(()=>t.value.length),s=$(()=>[...t.value].sort((d,p)=>p.savedAt-d.savedAt));function u(d){return t.value.filter(p=>p.heroId===d).sort((p,k)=>k.savedAt-p.savedAt)}function m(d,p,k,f,A){const w={id:`${d}-${Date.now()}`,heroId:d,heroName:p,heroClass:k,paragonLevel:f,recommendation:A,savedAt:Date.now()};return t.value.push(w),n(),w}function c(d){const p=t.value.findIndex(k=>k.id===d);p!==-1&&(t.value.splice(p,1),n())}function y(d){return t.value.find(p=>p.id===d)}function b(){t.value=[],n()}function S(d){return new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}return{reports:t,reportCount:o,sortedReports:s,getReportsForHero:u,saveReport:m,deleteReport:c,getReport:y,clearAllReports:b,formatDate:S}}),Q={class:"skill-recommendations"},X={key:0,class:"skill-section"},Z={class:"skill-list"},ee={class:"skill-header"},te={class:"skill-name"},se={key:0,class:"skill-rune"},ne={class:"skill-reason"},oe={key:1,class:"skill-section"},ae={class:"skill-list passive"},re={class:"skill-header"},ie={class:"skill-name"},le={class:"skill-reason"},ce=H({__name:"SkillRecommendations",props:{activeSkills:{},passiveSkills:{}},setup(t){return(l,n)=>(a(),r("div",Q,[t.activeSkills.length>0?(a(),r("div",X,[n[0]||(n[0]=e("h4",null,"Active Skills",-1)),e("div",Z,[(a(!0),r(R,null,C(t.activeSkills,(o,s)=>(a(),r("div",{key:s,class:"skill-item"},[e("div",ee,[e("span",te,i(o.skill),1),o.rune?(a(),r("span",se,i(o.rune),1)):g("",!0)]),e("p",ne,i(o.reason),1)]))),128))])])):g("",!0),t.passiveSkills.length>0?(a(),r("div",oe,[n[1]||(n[1]=e("h4",null,"Passive Skills",-1)),e("div",ae,[(a(!0),r(R,null,C(t.passiveSkills,(o,s)=>(a(),r("div",{key:s,class:"skill-item"},[e("div",re,[e("span",ie,i(o.skill),1)]),e("p",le,i(o.reason),1)]))),128))])])):g("",!0)]))}}),de=N(ce,[["__scopeId","data-v-12c6e967"]]),ue={class:"gear-recommendations"},me={key:0,class:"gear-section"},ve={class:"set-list"},ge={class:"set-header"},ye={class:"set-name quality-set"},pe={class:"set-pieces"},he={class:"set-reason"},fe={key:1,class:"gear-section"},ke={class:"item-list"},be={class:"item-header"},we={class:"item-slot"},$e={class:"item-name quality-legendary"},Se={class:"item-reason"},je={key:2,class:"gear-section"},Pe={class:"cube-powers"},Re={key:0,class:"cube-power-item"},Ae={class:"cube-header"},_e={class:"cube-item quality-legendary"},Ce={key:0,class:"cube-reason"},Ie={key:1,class:"cube-power-item"},He={class:"cube-header"},Ne={class:"cube-item quality-legendary"},Le={key:0,class:"cube-reason"},ze={key:2,class:"cube-power-item"},xe={class:"cube-header"},Te={class:"cube-item quality-legendary"},Me={key:0,class:"cube-reason"},Be={key:3,class:"gear-section"},Ge={class:"gem-list"},Fe={class:"gem-header"},De={class:"gem-priority"},Ee={class:"gem-name"},qe={class:"gem-reason"},Oe={key:4,class:"gear-section"},We={class:"farming-list"},Ue=H({__name:"GearRecommendations",props:{sets:{},items:{},cubePowers:{},gems:{},farmingPriority:{}},setup(t){function l(n){return{mainHand:"Main Hand",offHand:"Off-Hand",head:"Head",shoulders:"Shoulders",neck:"Neck",torso:"Chest",hands:"Hands",waist:"Waist",wrists:"Bracers",legs:"Legs",feet:"Feet",leftFinger:"Ring",rightFinger:"Ring"}[n]||n}return(n,o)=>(a(),r("div",ue,[t.sets.length>0?(a(),r("div",me,[o[0]||(o[0]=e("h4",null,"Recommended Sets",-1)),e("div",ve,[(a(!0),r(R,null,C(t.sets,(s,u)=>(a(),r("div",{key:u,class:"set-item"},[e("div",ge,[e("span",ye,i(s.name),1),e("span",pe,i(s.pieces)+" pieces",1)]),e("p",he,i(s.reason),1)]))),128))])])):g("",!0),t.items.length>0?(a(),r("div",fe,[o[1]||(o[1]=e("h4",null,"Key Items",-1)),e("div",ke,[(a(!0),r(R,null,C(t.items,(s,u)=>(a(),r("div",{key:u,class:"item-rec"},[e("div",be,[e("span",we,i(l(s.slot)),1),e("span",$e,i(s.item),1)]),e("p",Se,i(s.reason),1)]))),128))])])):g("",!0),t.cubePowers.weapon?.name||t.cubePowers.armor?.name||t.cubePowers.jewelry?.name?(a(),r("div",je,[o[5]||(o[5]=e("h4",null,"Kanai's Cube Powers",-1)),e("div",Pe,[t.cubePowers.weapon?.name?(a(),r("div",Re,[e("div",Ae,[o[2]||(o[2]=e("span",{class:"cube-label"},"Weapon",-1)),e("span",_e,i(t.cubePowers.weapon.name),1)]),t.cubePowers.weapon.reason?(a(),r("p",Ce,i(t.cubePowers.weapon.reason),1)):g("",!0)])):g("",!0),t.cubePowers.armor?.name?(a(),r("div",Ie,[e("div",He,[o[3]||(o[3]=e("span",{class:"cube-label"},"Armor",-1)),e("span",Ne,i(t.cubePowers.armor.name),1)]),t.cubePowers.armor.reason?(a(),r("p",Le,i(t.cubePowers.armor.reason),1)):g("",!0)])):g("",!0),t.cubePowers.jewelry?.name?(a(),r("div",ze,[e("div",xe,[o[4]||(o[4]=e("span",{class:"cube-label"},"Jewelry",-1)),e("span",Te,i(t.cubePowers.jewelry.name),1)]),t.cubePowers.jewelry.reason?(a(),r("p",Me,i(t.cubePowers.jewelry.reason),1)):g("",!0)])):g("",!0)])])):g("",!0),t.gems.length>0?(a(),r("div",Be,[o[6]||(o[6]=e("h4",null,"Legendary Gems",-1)),e("div",Ge,[(a(!0),r(R,null,C(t.gems,(s,u)=>(a(),r("div",{key:u,class:"gem-rec"},[e("div",Fe,[e("span",De,"#"+i(s.priority),1),e("span",Ee,i(s.name),1)]),e("p",qe,i(s.reason),1)]))),128))])])):g("",!0),t.farmingPriority.length>0?(a(),r("div",Oe,[o[7]||(o[7]=e("h4",null,"Farming Priority",-1)),e("ol",We,[(a(!0),r(R,null,C(t.farmingPriority,(s,u)=>(a(),r("li",{key:u},i(s),1))),128))])])):g("",!0)]))}}),Ke=N(Ue,[["__scopeId","data-v-22bc8ccd"]]),Je={class:"stat-projections"},Ve={class:"stats-grid"},Ye={class:"stat-card"},Qe={class:"stat-current"},Xe={class:"stat-multiplier"},Ze={key:0,class:"stat-note"},et={class:"stat-card"},tt={class:"stat-current"},st={class:"stat-multiplier"},nt={key:0,class:"stat-note"},ot={class:"stat-card"},at={class:"stat-current"},rt={class:"stat-multiplier"},it={key:0,class:"stat-note"},lt={class:"stat-card"},ct={class:"stat-current"},dt={class:"stat-multiplier"},ut={key:0,class:"stat-note"},mt={class:"gr-projection"},vt={class:"gr-header"},gt={class:"gr-tiers"},yt={class:"gr-current"},pt={class:"gr-projected"},ht={key:0,class:"gr-note"},ft=H({__name:"StatProjections",props:{projections:{},currentStats:{}},setup(t){const l=t;function n(m){return m==null?"‚Äî":m>=1e6?(m/1e6).toFixed(1)+"M":m>=1e3?(m/1e3).toFixed(0)+"K":m.toLocaleString()}function o(m){return`rating-${m}`}function s(m){return{minor:"Minor",moderate:"Moderate",major:"Major",transformative:"Transformative"}[m]}function u(){const m=l.projections.grTierPotential.current,c=l.projections.grTierPotential.projected,y=p=>{const k=p.match(/\d+/g);if(!k)return 0;const f=k.map(Number);return f.reduce((A,w)=>A+w,0)/f.length},b=y(m),d=y(c)-b;return d>=30?"transformative":d>=20?"major":d>=10?"moderate":"minor"}return(m,c)=>(a(),r("div",Je,[c[10]||(c[10]=e("h3",{class:"projections-title"},"Projected Improvements",-1)),e("div",Ve,[e("div",Ye,[c[0]||(c[0]=e("div",{class:"stat-label"},"Damage",-1)),e("div",Qe,i(n(t.currentStats.damage)),1),c[1]||(c[1]=e("div",{class:"stat-arrow"},"‚Üë",-1)),e("div",Xe,"~"+i(t.projections.damage.estimatedMultiplier),1),e("div",{class:I(["stat-rating",o(t.projections.damage.rating)])},i(s(t.projections.damage.rating)),3),t.projections.damage.note?(a(),r("div",Ze,i(t.projections.damage.note),1)):g("",!0)]),e("div",et,[c[2]||(c[2]=e("div",{class:"stat-label"},"Toughness",-1)),e("div",tt,i(n(t.currentStats.toughness)),1),c[3]||(c[3]=e("div",{class:"stat-arrow"},"‚Üë",-1)),e("div",st,"~"+i(t.projections.toughness.estimatedMultiplier),1),e("div",{class:I(["stat-rating",o(t.projections.toughness.rating)])},i(s(t.projections.toughness.rating)),3),t.projections.toughness.note?(a(),r("div",nt,i(t.projections.toughness.note),1)):g("",!0)]),e("div",ot,[c[4]||(c[4]=e("div",{class:"stat-label"},"Recovery",-1)),e("div",at,i(n(t.currentStats.recovery)),1),c[5]||(c[5]=e("div",{class:"stat-arrow"},"‚Üë",-1)),e("div",rt,"~"+i(t.projections.recovery.estimatedMultiplier),1),e("div",{class:I(["stat-rating",o(t.projections.recovery.rating)])},i(s(t.projections.recovery.rating)),3),t.projections.recovery.note?(a(),r("div",it,i(t.projections.recovery.note),1)):g("",!0)]),e("div",lt,[c[6]||(c[6]=e("div",{class:"stat-label"},"Life",-1)),e("div",ct,i(n(t.currentStats.life)),1),c[7]||(c[7]=e("div",{class:"stat-arrow"},"‚Üë",-1)),e("div",dt,"~"+i(t.projections.life.estimatedMultiplier),1),e("div",{class:I(["stat-rating",o(t.projections.life.rating)])},i(s(t.projections.life.rating)),3),t.projections.life.note?(a(),r("div",ut,i(t.projections.life.note),1)):g("",!0)])]),e("div",mt,[e("div",vt,[c[8]||(c[8]=e("span",{class:"gr-label"},"Greater Rift Potential",-1)),e("span",{class:I(["gr-rating",o(u())])},i(s(u()))+" Upgrade ",3)]),e("div",gt,[e("span",yt,i(t.projections.grTierPotential.current),1),c[9]||(c[9]=e("span",{class:"gr-arrow"},"‚Üí",-1)),e("span",pt,i(t.projections.grTierPotential.projected),1)]),t.projections.grTierPotential.note?(a(),r("div",ht,i(t.projections.grTierPotential.note),1)):g("",!0)])]))}}),kt=N(ft,[["__scopeId","data-v-dcef60f2"]]),bt={class:"build-recommendations"},wt={class:"summary-section"},$t={class:"summary-text"},St={key:1,class:"playstyle-section"},jt={class:"playstyle-text"},Pt={class:"recommendations-grid"},Rt={class:"column"},At={class:"column"},_t=H({__name:"BuildRecommendations",props:{recommendation:{},currentStats:{}},setup(t){return(l,n)=>(a(),r("div",bt,[t.recommendation.projectedImprovements&&t.currentStats?(a(),E(kt,{key:0,projections:t.recommendation.projectedImprovements,"current-stats":t.currentStats},null,8,["projections","current-stats"])):g("",!0),e("div",wt,[n[0]||(n[0]=e("h3",null,"Build Summary",-1)),e("p",$t,i(t.recommendation.summary),1)]),t.recommendation.playstyle?(a(),r("div",St,[n[1]||(n[1]=e("h3",null,"How to Play",-1)),e("p",jt,i(t.recommendation.playstyle),1)])):g("",!0),e("div",Pt,[e("div",Rt,[n[2]||(n[2]=e("h3",null,"Recommended Skills",-1)),L(de,{"active-skills":t.recommendation.skills.active,"passive-skills":t.recommendation.skills.passive},null,8,["active-skills","passive-skills"])]),e("div",At,[n[3]||(n[3]=e("h3",null,"Recommended Gear",-1)),L(Ke,{sets:t.recommendation.gear.sets,items:t.recommendation.gear.items,"cube-powers":t.recommendation.gear.cubePowers,gems:t.recommendation.gems,"farming-priority":t.recommendation.farmingPriority},null,8,["sets","items","cube-powers","gems","farming-priority"])])])]))}}),Ct=N(_t,[["__scopeId","data-v-7e743202"]]),It={class:"build-advisor-view"},Ht={key:0,class:"empty-state"},Nt={key:1,class:"empty-state"},Lt={class:"hero-bar"},zt={class:"hero-info"},xt={class:"hero-name"},Tt={class:"hero-details"},Mt={key:0,class:"paragon"},Bt={class:"hero-bar-actions"},Gt=["disabled"],Ft={key:0},Dt={key:1},Et={key:2},qt={key:0,class:"saved-reports-panel"},Ot={class:"saved-reports-header"},Wt={class:"saved-reports-list"},Ut=["onClick"],Kt={class:"report-date"},Jt={class:"report-summary"},Vt=["onClick"],Yt={key:1,class:"viewing-saved-banner"},Qt={key:2,class:"loading-state"},Xt={key:3,class:"error-state"},Zt={key:4,class:"recommendations-container"},es={key:0,class:"save-bar"},ts={key:0,class:"save-message"},ss={key:5,class:"initial-state"},ns={key:0,class:"saved-hint"},os=H({__name:"BuildAdvisorView",setup(t){const l=O(),n=W(),o=x(),s=V(),u=Y(),m=$(()=>n.currentHero!==null),c=$(()=>o.isClaudeConfigured),y=P(!1),b=P(""),S=$(()=>n.currentHero?u.getReportsForHero(n.currentHero.heroId):[]),d=P(null),p=$(()=>d.value?d.value.recommendation:s.recommendation),k=$(()=>d.value!==null);async function f(){if(!n.currentHero)return;d.value=null;const _=s.hasRecommendation;await s.generateBuildSuggestion(n.currentHero,_)}function A(){!n.currentHero||!s.recommendation||(u.saveReport(n.currentHero.heroId,n.currentHero.name,n.currentHero.heroClass,n.currentHero.paragonLevel,s.recommendation),b.value="Report saved!",setTimeout(()=>{b.value=""},2e3))}function w(_){d.value=_,y.value=!1}function M(_){confirm("Delete this saved report?")&&(u.deleteReport(_),d.value?.id===_&&(d.value=null))}function B(){d.value=null}function G(){l.push("/heroes")}function F(){l.push("/settings")}return(_,v)=>(a(),r("div",It,[v[15]||(v[15]=e("div",{class:"advisor-header"},[e("div",{class:"header-content"},[e("h1",null,"AI Build Advisor"),e("p",{class:"header-description"}," Get AI-powered build recommendations for your hero ")])],-1)),c.value?m.value?(a(),r(R,{key:2},[e("div",Lt,[e("div",zt,[e("span",xt,i(h(n).currentHero.name),1),e("span",Tt,[q(" Level "+i(h(n).currentHero.level)+" "+i(h(n).currentHero.heroClass)+" ",1),h(n).currentHero.paragonLevel?(a(),r("span",Mt," (P"+i(h(n).currentHero.paragonLevel)+") ",1)):g("",!0)])]),e("div",Bt,[S.value.length>0?(a(),r("button",{key:0,class:"btn btn-secondary",onClick:v[0]||(v[0]=j=>y.value=!y.value)}," üìÅ Saved ("+i(S.value.length)+") ",1)):g("",!0),e("button",{class:"btn btn-primary",disabled:h(s).isAnalyzing,onClick:f},[h(s).isAnalyzing?(a(),r("span",Ft,"Analyzing...")):h(s).hasRecommendation?(a(),r("span",Dt,"Re-analyze Build")):(a(),r("span",Et,"Analyze My Build"))],8,Gt)])]),y.value?(a(),r("div",qt,[e("div",Ot,[v[8]||(v[8]=e("h3",null,"Saved Reports",-1)),e("button",{class:"btn-close",onClick:v[1]||(v[1]=j=>y.value=!1)},"√ó")]),e("div",Wt,[(a(!0),r(R,null,C(S.value,j=>(a(),r("div",{key:j.id,class:I(["saved-report-item",{active:d.value?.id===j.id}])},[e("div",{class:"report-info",onClick:D=>w(j)},[e("span",Kt,i(h(u).formatDate(j.savedAt)),1),e("span",Jt,"P"+i(j.paragonLevel)+" "+i(j.heroClass),1)],8,Ut),e("button",{class:"btn-delete",onClick:D=>M(j.id),title:"Delete"}," üóëÔ∏è ",8,Vt)],2))),128))])])):g("",!0),k.value?(a(),r("div",Yt,[e("span",null,"Viewing saved report from "+i(h(u).formatDate(d.value.savedAt)),1),e("button",{class:"btn btn-secondary btn-sm",onClick:B}," Back to Current ")])):g("",!0),h(s).isAnalyzing?(a(),r("div",Qt,[L(U,{message:"Claude is analyzing your build..."}),v[9]||(v[9]=e("p",{class:"loading-subtitle"},"This may take a few seconds",-1))])):h(s).error&&!k.value?(a(),r("div",Xt,[v[10]||(v[10]=e("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),v[11]||(v[11]=e("h2",null,"Analysis Failed",-1)),e("p",null,i(h(s).error),1),e("button",{class:"btn btn-primary",onClick:f}," Try Again ")])):p.value?(a(),r("div",Zt,[!k.value&&h(s).hasRecommendation?(a(),r("div",es,[e("button",{class:"btn btn-save",onClick:A}," üíæ Save This Report "),b.value?(a(),r("span",ts,i(b.value),1)):g("",!0)])):g("",!0),L(Ct,{recommendation:p.value,"current-stats":{damage:h(n).currentHero?.damage,toughness:h(n).currentHero?.toughness,recovery:h(n).currentHero?.recovery,life:h(n).currentHero?.life}},null,8,["recommendation","current-stats"])])):(a(),r("div",ss,[v[12]||(v[12]=e("div",{class:"initial-icon"},"ü§ñ",-1)),v[13]||(v[13]=e("h2",null,"Ready to Analyze",-1)),v[14]||(v[14]=e("p",null,' Click "Analyze My Build" to get AI-powered recommendations for skills, gear, sets, and legendary gems based on your current hero setup. ',-1)),S.value.length>0?(a(),r("p",ns," Or view one of your "+i(S.value.length)+" saved report(s). ",1)):g("",!0)]))],64)):(a(),r("div",Nt,[v[5]||(v[5]=e("div",{class:"empty-icon"},"‚öîÔ∏è",-1)),v[6]||(v[6]=e("h2",null,"No Hero Loaded",-1)),v[7]||(v[7]=e("p",null,"Load a hero from the Dashboard first to get build recommendations.",-1)),e("button",{class:"btn btn-primary",onClick:G}," Select a Hero ")])):(a(),r("div",Ht,[v[2]||(v[2]=e("div",{class:"empty-icon"},"üîë",-1)),v[3]||(v[3]=e("h2",null,"Claude API Key Required",-1)),v[4]||(v[4]=e("p",null,"Add your Claude API key in Settings to enable AI build recommendations.",-1)),e("button",{class:"btn btn-primary",onClick:F}," Go to Settings ")]))]))}}),ls=N(os,[["__scopeId","data-v-63e1dfea"]]);export{ls as default};
